{% extends "cadastro/base.html" %}
{% load static %}

{% block cadastro_title_page %}
    Cadastro de Aluno | Passo 3 de 4
{% endblock %}

{% block card_title %}
    Crie Seu Acesso
{% endblock %}

{% block card_subtitle %}
    Informe seu e-mail, nome e uma senha segura para finalizar o pré-cadastro.
{% endblock %}

{% block auth_content %}
    <div class="cadastro-card mx-auto">
        <form method="post">
            {% csrf_token %}

            {# Exibe erros não relacionados a campos usando a classe de alerta correta #}
            {% if form.non_field_errors %}
                <div class="alert-danger mb-2" role="alert">
                    <p>Corrija os erros abaixo:</p>
                    {# Loop direto sobre non_field_errors (já que são textos) #}
                    {% for error in form.non_field_errors %}
                        <p class="form-error mt-1">{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            {# Itera sobre os campos do formulário para renderização individual #}
            {% for field in form %}
                <div class="form-group">
                    <label for="{{ field.id_for_label }}" class="form-label">
                        {{ field.label }}
                    </label>

                    {# Renderiza o widget do campo (Input, Textarea, etc.) #}
                    {{ field }}

                    {% if field.help_text %}
                        <small class="form-help">{{ field.help_text|safe }}</small>
                    {% endif %}

                    {# Exibe erros específicos do campo #}
                    {% for error in field.errors %}
                        <p class="form-error">{{ error }}</p>
                    {% endfor %}
                </div>
            {% endfor %}

            <div class="action-buttons-group mt-3">
                <button type="submit" class="btn btn-primary action-button">
                    Finalizar Cadastro (Passo 4)
                </button>
                {# Rota de Voltar: Deve apontar para o Passo 2 do fluxo (Complemento Específico) #}
                <a href="{% url 'users:registration_step_2_complemento' %}" class="btn btn-back action-button">
                    &larr; Voltar (Passo 2)
                </a>
            </div>
        </form>
    </div>
{% endblock auth_content %}