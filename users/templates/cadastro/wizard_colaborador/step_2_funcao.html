{% extends "cadastro/base.html" %}
{% load static %}

{% block cadastro_title_page %}
    Cadastro de Colaborador | Passo 2 de 4
{% endblock %}

{% block card_title %}
    Função do Colaborador
{% endblock %}

{% block card_subtitle %}
    Selecione a função que melhor descreve sua atuação na instituição.
{% endblock %}

{% block auth_content %}
    <div class="cadastro-card mx-auto">
        <form method="post">
            {% csrf_token %}

            {# Exibe erros não relacionados a campos usando a classe de alerta correta (.alert-danger) #}
            {% if form.non_field_errors %}
                <div class="alert-danger mb-2" role="alert">
                    <p>Corrija os erros abaixo:</p>
                    {% for error in form.non_field_errors %}
                        <p class="form-error mt-1">{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            <div class="form-group">
                <label for="{{ form.funcao.id_for_label }}" class="form-label">
                    {{ form.funcao.label }}
                </label>

                {# Renderiza o widget do campo (Select ou Input, dependendo do Field) #}
                {{ form.funcao }}

                {% if form.funcao.help_text %}
                    <small class="form-help">{{ form.funcao.help_text|safe }}</small>
                {% endif %}

                {# Exibe erros específicos do campo #}
                {% for error in form.funcao.errors %}
                    <p class="form-error">{{ error }}</p>
                {% endfor %}
            </div>

            <div class="action-buttons-group mt-3">
                <button type="submit" class="btn btn-primary action-button">
                    Continuar (Passo 3)
                </button>
                {# Rota de Voltar: Usa 'btn-back' para o visual de botão de retorno e coerência #}
                <a href="{% url 'users:registration_step_1_tipo' %}" class="btn btn-back action-button">
                    &larr; Voltar (Trocar Tipo)
                </a>
            </div>
        </form>
    </div>
{% endblock auth_content %}