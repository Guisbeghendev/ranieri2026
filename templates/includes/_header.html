{% load static %}
<header class="header">
    <div class="logo">
        <a href="{% url 'core:home' %}">
            <img src="{% static 'images/logo/prof_ranieri.png' %}" alt="Logo Escola Ranieri" onerror="this.onerror=null; this.src='https://placehold.co/80x80/61152d/FFFFFF?text=LOGO'">
        </a>
    </div>

    <nav>
        <ul id="main-nav-ul">
            <li><a href="{% url 'core:home' %}">Home</a></li>
            <li><a href="{% url 'historia:livro_digital' %}">Histﾃｳria</a></li>
            {# CORREﾃﾃグ: Aponta para a rota de ﾃｭndice 'coral:index', que exibe os botﾃｵes de escolha (coral_index.html) #}
            <li><a href="{% url 'coral:index' %}">Coral</a></li>
            {# Link para o ﾃ肱dice Simoninha na Cozinha (Rota 'sim_cozinha:index') #}
            <li><a href="{% url 'sim_cozinha:index' %}">Simoninha na Cozinha</a></li>
            {# Link para o ﾃ肱dice Brincando & Dialogando (Rota 'brinc_dialogando:index') #}
            <li><a href="{% url 'brinc_dialogando:index' %}">Brincando & Dialogando</a></li>

            {# 圷 ATUALIZAﾃﾃグ: Link para Repositﾃｳrio (anteriormente Galerias). Visibilidade baseada no grupo de acesso. #}
            {% if user.is_authenticated and user.is_superuser %}
                {# O superuser pode gerenciar tudo #}
                <li><a href="{% url 'repositorio:gerenciar_galerias' %}">Repositﾃｳrio</a></li>
            {% elif user.is_authenticated and user.is_fotografo or user.is_fotografo_master %}
                {# CORREﾃﾃグ: Fotﾃｳgrafo (normal ou master) acessa a gestﾃ｣o como "Repositﾃｳrio" #}
                <li><a href="{% url 'repositorio:gerenciar_galerias' %}">Repositﾃｳrio</a></li>
            {% else %}
                {# CORREﾃﾃグ: Usuﾃ｡rio padrﾃ｣o ou anﾃｴnimo vﾃｪ o link pﾃｺblico como "Repositﾃｳrio" #}
                <li><a href="#">Repositﾃｳrio</a></li>
            {% endif %}


            {% if user.is_authenticated %}
                <li><a href="{% url 'users:dashboard' %}">Painel</a></li>
                {# ADIﾃﾃグ CORRIGIDA: Link para a nova rota 'mensagens:chat_list' #}
                <li><a href="{% url 'mensagens:chat_list' %}">Mensagens</a></li>
                <li>
                    <form method="post" action="{% url 'users:logout' %}">
                        {% csrf_token %}
                        <button type="submit" class="btn-logout">Sair <i class="fas fa-sign-out-alt"></i></button>
                    </form>
                </li>
            {% else %}
                {# ADIﾃﾃグ: Link para Cadastro #}
                <li><a href="{% url 'users:register' %}" class="btn-primary">Cadastro</a></li>
                <li><a href="{% url 'users:login' %}" class="btn-primary btn-logout">Entrar</a></li>
            {% endif %}
        </ul>
        <div class="hamburger" id="hamburger-menu">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>
</header>

<script>
    // Lﾃｳgica JavaScript para o menu responsivo (Hamburger)
    document.addEventListener('DOMContentLoaded', function() {
        const hamburger = document.getElementById('hamburger-menu');
        const navUl = document.getElementById('main-nav-ul');

        if (hamburger) {
            hamburger.addEventListener('click', function() {
                navUl.classList.toggle('show');
            });
        }
    });
</script>